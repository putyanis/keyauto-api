openapi: 3.0.0
info:
  title: MA - KeyAuto API
  version: 0.0.1

tags:
  - name: Авторизация
  - name: Звонки
  - name: Задачи
  - name: Проверки
  - name: Клиенты
  - name: Оценки
  - name: Справочники

paths:
  /login:
    post:
      description: Аутентификация и авторизация
      tags:
        - Авторизация
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/authRequest'
      responses:
        '200':
          description: Если авторизация успешна
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/authResult'
        '401':
          description: Любая ошибка авторизации - неправильный логин/пароль, нет прав, пользователь не существует
  /checkToken:
    post:
      description: Проверка валидности токена
      tags:
        - Авторизация
      security:
        - tokenized: []
      responses:
        '200':
          description: Токен валидный и активный
        '401':
          description: Токен невалидный
  /call/in:
    get:
      description: Входящие звонки
      tags:
        - Звонки
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/callSort'
        - $ref: '#/components/parameters/fullText'
        - $ref: '#/components/parameters/datePreset'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/canal'
        - $ref: '#/components/parameters/contract'
        - $ref: '#/components/parameters/dealer'
        - $ref: '#/components/parameters/seller'
        - $ref: '#/components/parameters/phone'
        - $ref: '#/components/parameters/callDate'
        - $ref: '#/components/parameters/callDirection'
        - $ref: '#/components/parameters/callStatus'
        - $ref: '#/components/parameters/source'
        - $ref: '#/components/parameters/callType'
        - $ref: '#/components/parameters/callReason'
        - $ref: '#/components/parameters/callResult'
        - $ref: '#/components/parameters/callOperator'
        - $ref: '#/components/parameters/callAssignee'
        - $ref: '#/components/parameters/filterClientID'
      responses:
        '200':
          description: Список входящих звонков
          content:
            application/json:
              schema:
                type: object
                properties:
                  paging:
                    $ref: '#/components/schemas/paging'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/callList'
                  statistic:
                    $ref: '#/components/schemas/callStatistic'
  /call/in/{callID}:
    put:
      description: Обновление входящего звонка
      tags:
        - Звонки
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/callID'
      requestBody:
        required: true
        description: Поля входящего звонка
        content:
          'application/json':
            schema:
              allOf:
                - $ref: '#/components/schemas/callCardInUpdate'
      responses:
        '200':
          description: Результат обновления входящего звонка
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/success'
                  - $ref: '#/components/schemas/failed'
  /call/out:
    get:
      description: Исходящие звонки
      tags:
        - Звонки
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/callSort'
        - $ref: '#/components/parameters/fullText'
        - $ref: '#/components/parameters/datePreset'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/canal'
        - $ref: '#/components/parameters/contract'
        - $ref: '#/components/parameters/dealer'
        - $ref: '#/components/parameters/seller'
        - $ref: '#/components/parameters/phone'
        - $ref: '#/components/parameters/callDate'
        - $ref: '#/components/parameters/callDirection'
        - $ref: '#/components/parameters/callStatus'
        - $ref: '#/components/parameters/source'
        - $ref: '#/components/parameters/callType'
        - $ref: '#/components/parameters/callReason'
        - $ref: '#/components/parameters/callResult'
        - $ref: '#/components/parameters/callOperator'
        - $ref: '#/components/parameters/callAssignee'
        - $ref: '#/components/parameters/filterClientID'
      responses:
        '200':
          description: Список исходящих звонков
          content:
            application/json:
              schema:
                type: object
                properties:
                  paging:
                    $ref: '#/components/schemas/paging'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/callList'
                  statistic:
                    $ref: '#/components/schemas/callStatistic'
    post:
      description: Регистрация исходящего звонка
      tags:
        - Звонки
      security:
        - tokenized: []
      responses:
        '200':
          description: Результат регистрации
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/success'
                  - $ref: '#/components/schemas/failed'
      requestBody:
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/newCall'
                - $ref: '#/components/schemas/newCallExtended'
  /call/out/{callID}:
    put:
      description: Обновление исходящего звонка
      tags:
        - Звонки
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/callID'
      requestBody:
        required: true
        description: Поля исходящего звонка
        content:
          'application/json':
            schema:
              allOf:
                - $ref: '#/components/schemas/callCardOutUpdate'
      responses:
        '200':
          description: Результат обновления исходящего звонка
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/success'
                  - $ref: '#/components/schemas/failed'
  /call/{callID}:
    get:
      description: Информация о звонке
      tags:
        - Звонки
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/callID'
      responses:
        '200':
          description: Полная информация о звонке
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: Идентификатор
                  - oneOf:
                      - $ref: '#/components/schemas/callCardOut'
                      - $ref: '#/components/schemas/callCardIn'
  /issue:
    get:
      description: Список задач
      tags:
        - Задачи
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/issueSort'
        - $ref: '#/components/parameters/fullText'
        - $ref: '#/components/parameters/datePreset'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/createdAt'
        - $ref: '#/components/parameters/doneAt'
        - $ref: '#/components/parameters/issueType'
        - $ref: '#/components/parameters/issueStatus'
        - $ref: '#/components/parameters/canal'
        - $ref: '#/components/parameters/contract'
        - $ref: '#/components/parameters/dealer'
        - $ref: '#/components/parameters/issueAssignee'
        - $ref: '#/components/parameters/seller'
        - $ref: '#/components/parameters/phone'
        - $ref: '#/components/parameters/vin'
        - $ref: '#/components/parameters/filterClientID'
      responses:
        '200':
          description: Список доступных задач
          content:
            application/json:
              schema:
                type: object
                properties:
                  paging:
                    $ref: '#/components/schemas/paging'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/issueList'
                  statistic:
                    $ref: '#/components/schemas/issueStatistic'
    post:
      description: Создание задачи
      tags:
        - Задачи
      security:
        - tokenized: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/issueCard'
      responses:
        '200':
          description: Результат создания задачи
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      issue:
                        $ref: '#/components/schemas/issueCard'
                  - oneOf:
                      - $ref: '#/components/schemas/success'
                      - $ref: '#/components/schemas/failed'
  /issue/{issueID}:
    get:
      description: Информация о задаче
      tags:
        - Задачи
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/issueID'
      responses:
        '200':
          description: Полная информация о задаче
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: Идентификатор
                  - allOf:
                      - $ref: '#/components/schemas/issueCard'
    put:
      description: Обновление задачи
      tags:
        - Задачи
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/issueID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/issueCard'
      responses:
        '200':
          description: Результат обновления задачи
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      issue:
                        $ref: '#/components/schemas/issueCard'
                  - oneOf:
                    - $ref: '#/components/schemas/success'
                    - $ref: '#/components/schemas/failed'
  /checkClient:
    post:
      description: Проверка клиента
      tags:
        - Проверки
      security:
        - tokenized: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - $ref: '#/components/schemas/counterparty'
                - $ref: '#/components/schemas/forceCheck'
      responses:
        '200':
          description: Результат проверки клиента
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/checkResults'
                  - $ref: '#/components/schemas/checkNotPossible'
  /checkCar:
    post:
      description: Проверка автомобиля
      tags:
        - Проверки
      security:
        - tokenized: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                - $ref: '#/components/schemas/issueCar'
                - $ref: '#/components/schemas/forceCheck'
      responses:
        '200':
          description: Результат проверки автомобиля
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/checkResults'
                  - $ref: '#/components/schemas/checkNotPossible'
  /report/{reportID}:
    get:
      description: Получить отчет о проверки
      tags:
        - Проверки
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/reportID'
      responses:
        '200':
          description: BiteArray файла с отчетом
        '404':
          description: Отчет не существует
  /client:
    get:
      description: Список клиентов
      tags:
        - Клиенты
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/clientSort'
        - $ref: '#/components/parameters/fullText'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/createdAt'
        - $ref: '#/components/parameters/clientStatus'
        - $ref: '#/components/parameters/ppd'
        - $ref: '#/components/parameters/clientType'
        - $ref: '#/components/parameters/need'
        - $ref: '#/components/parameters/canal'
        - $ref: '#/components/parameters/contract'
        - $ref: '#/components/parameters/dealer'
        - $ref: '#/components/parameters/createdBy'
        - $ref: '#/components/parameters/name'
        - $ref: '#/components/parameters/email'
        - $ref: '#/components/parameters/vin'
      responses:
        '200':
          description: Список доступных клиентов
          content:
            application/json:
              schema:
                type: object
                properties:
                  paging:
                    $ref: '#/components/schemas/paging'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/clientList'
    post:
      description: Добавдение клиента
      tags:
        - Клиенты
      security:
        - tokenized: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/clientCard'
      responses:
        '200':
          description: Результат создания клиента
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      issue:
                        $ref: '#/components/schemas/clientCard'
                  - oneOf:
                      - $ref: '#/components/schemas/success'
                      - $ref: '#/components/schemas/failed'
  /client/{clientID}:
    get:
      description: Информация о клиенте
      tags:
        - Клиенты
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/clientID'
      responses:
        '200':
          description: Информация о клиенте
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: string
                        description: Идентификатор
                  - allOf:
                      - $ref: '#/components/schemas/clientCard'
    put:
      description: Обновление клиента
      tags:
        - Клиенты
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/clientID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/clientCard'
      responses:
        '200':
          description: Результат обновления клиента
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      client:
                        $ref: '#/components/schemas/clientCard'
                  - oneOf:
                      - $ref: '#/components/schemas/success'
                      - $ref: '#/components/schemas/failed'
  /client/{clientID}/car:
    get:
      description: Информация об автомобилях клиента
      tags:
        - Клиенты
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/clientID'
      responses:
        '200':
          description: Информация об автомобилях клиента
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/clientCar'
  /client/{clientID}/valuation:
    get:
      description: Информация об оценках клиента
      tags:
        - Клиенты
      security:
        - tokenized: [ ]
      parameters:
        - $ref: '#/components/parameters/clientID'
      responses:
        '200':
          description: Информация об оценках клиента
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/clientValuation'
  /valuation:
    get:
      description: Список оценок
      tags:
        - Оценки
      security:
        - tokenized: []
      parameters:
        - $ref: '#/components/parameters/valuationSort'
        - $ref: '#/components/parameters/fullText'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/pageSize'
        - $ref: '#/components/parameters/valuationStatus'
        - $ref: '#/components/parameters/createdAt'
        - $ref: '#/components/parameters/inspectedAt'
        - $ref: '#/components/parameters/diagnosticsAt'
        - $ref: '#/components/parameters/acceptedAt'
        - $ref: '#/components/parameters/inspectionStatus'
        - $ref: '#/components/parameters/diagnosticsStatus'
        - $ref: '#/components/parameters/agreementStatus'
        - $ref: '#/components/parameters/purchasePrice'
        - $ref: '#/components/parameters/purchasePriceDiff'
        - $ref: '#/components/parameters/arrivalStatus'
        - $ref: '#/components/parameters/warehouseID'
        - $ref: '#/components/parameters/canal'
        - $ref: '#/components/parameters/contract'
        - $ref: '#/components/parameters/dealer'
        - $ref: '#/components/parameters/createdBy'
        - $ref: '#/components/parameters/valuationAssignee'
        - $ref: '#/components/parameters/seller'
        - $ref: '#/components/parameters/valuationContractor'
        - $ref: '#/components/parameters/valuationClientStatus'
        - $ref: '#/components/parameters/ppd'
        - $ref: '#/components/parameters/valuationClientType'
        - $ref: '#/components/parameters/name'
        - $ref: '#/components/parameters/phone'
        - $ref: '#/components/parameters/email'
        - $ref: '#/components/parameters/need'
        - $ref: '#/components/parameters/vin'
        - $ref: '#/components/parameters/carNumber'
        - $ref: '#/components/parameters/bodyNumber'
        - $ref: '#/components/parameters/engineNumber'
        - $ref: '#/components/parameters/carType'
        - $ref: '#/components/parameters/brand'
        - $ref: '#/components/parameters/model'
        - $ref: '#/components/parameters/generation'
        - $ref: '#/components/parameters/bodyType'
        - $ref: '#/components/parameters/wheelPosition'
        - $ref: '#/components/parameters/year'
        - $ref: '#/components/parameters/engineType'
        - $ref: '#/components/parameters/engineVolume'
        - $ref: '#/components/parameters/enginePower'
        - $ref: '#/components/parameters/transmissionType'
        - $ref: '#/components/parameters/driveType'
        - $ref: '#/components/parameters/mileage'
        - $ref: '#/components/parameters/carColor'
        - $ref: '#/components/parameters/metallic'
        - $ref: '#/components/parameters/interiorColor'
        - $ref: '#/components/parameters/condition'
        - $ref: '#/components/parameters/seats'
        - $ref: '#/components/parameters/doors'
        - $ref: '#/components/parameters/armored'
        - $ref: '#/components/parameters/class'
      responses:
        '200':
          description: Массив доступных оценок
          content:
            application/json:
              schema:
                type: object
                properties:
                  paging:
                    $ref: '#/components/schemas/paging'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/valuationList'

  /dictionary/dealer:
    get:
      description: Значения справочника "Автосалон"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/dealerTree'
  /dictionary/operator:
    get:
      description: Значения справочника "Оператор"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/operator'
  /dictionary/seller:
    get:
      description: Значения справочника "Продавец"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/seller'
  /dictionary/issueAssignee:
    get:
      description: Значения справочника "Ответственный". Отдаем тех, пользователей, на которых текущий пользователь может назначать сущность
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/issueAssignee'
  /dictionary/canal:
    get:
      description: Значения справочника "Канал"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/canal'
  /dictionary/contract:
    get:
      description: Значения справочника "Контракт"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/contract'
  /dictionary/brand:
    get:
      description: Значения справочника "Марка автомобиля"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/brand'
  /dictionary/brand/{brandID}/model:
    get:
      description: Значения справочника "Модель автомобиля"
      tags:
        - Справочники
      security:
        - tokenized: []
      parameters:
        - in: path
          name: brandID
          description: Идентификатор марки
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/model'
  /dictionary/brand/{brandID}/model/{modelID}/generation:
    get:
      description: Список поколений модели
      tags:
        - Справочники
      security:
        - tokenized: []
      parameters:
        - in: path
          name: brandID
          description: Идентификатор марки
          required: true
          schema:
            type: string
        - in: path
          name: modelID
          description: Идентификатор модели
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/generation'
  /dictionary/source:
    get:
      description: Значения справочника "Источник"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/source'
  /dictionary/reason:
    get:
      description: Значения справочника "Причина звонка"
      tags:
        - Справочники
      security:
        - tokenized: []
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/reason'
  /dictionary/need:
    get:
      description: Значения справочника "Потребность"
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/need'
  /dictionary/result:
    get:
      description: Значения справочника "Результат коммуникации"
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/callResult'
  /dictionary/callType:
    get:
      description: Значения справочника "Тип звонка"
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/callType'
  /dictionary/callAssignee:
    get:
      description: Список пользователей для фильтра "Ответственный" в звонках
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/callAssignee'
  /dictionary/counterpartyType:
    get:
      description: Список типов клиентов
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/counterpartyType'
  /dictionary/citizenship:
    get:
      description: Список гражданств
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/citizenship'
  /dictionary/documentType:
    get:
      description: Список типов документов
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/documentType'
  /dictionary/carType:
    get:
      description: Список типов ТС
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/carType'
  /dictionary/bodyType:
    get:
      description: Список типов кузова
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/bodyType'
  /dictionary/wheelPosition:
    get:
      description: Список расположений руля
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/wheelPosition'
  /dictionary/transmissionType:
    get:
      description: Список типов коробки передач
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/transmissionType'
  /dictionary/driveType:
    get:
      description: Список типов привода
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/driveType'
  /dictionary/engineType:
    get:
      description: Список типов двигателя
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/engineType'
  /dictionary/carColor:
    get:
      description: Список цветов кузова
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/carColor'
  /dictionary/interiorColor:
    get:
      description: Список цветов салона
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/interiorColor'
  /dictionary/condition:
    get:
      description: Список состояний автомобиля
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/condition'
  /dictionary/seats:
    get:
      description: Список кол-ва мест
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/seats'
  /dictionary/doors:
    get:
      description: Список кол-ва дверей
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/doors'
  /dictionary/clientCreator:
    get:
      description: Список пользователей для фильтра "Создал клиента" в клиентах
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/clientCreator'
  /dictionary/valuationCreator:
    get:
      description: Список пользователей для фильтра "Создал оценку" в оценках
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/valuationCreator'
  /dictionary/valuationAssignee:
    get:
      description: Список пользователей для фильтра "Ответственный" в оценках
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/valuationAssignee'
  /dictionary/valuationContractors:
    get:
      description: Список пользователей для фильтра "Согласовал оценку" в оценках
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/valuationContractor'
  /dictionary/clientType:
    get:
      description: Список типов клиентов
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/clientType'
  /dictionary/carClass:
    get:
      description: Список классов автомобиля
      tags:
        - Справочники
      security:
        - tokenized: [ ]
      responses:
        '200':
          description: Массив значений
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/class'

components:
  securitySchemes:
    tokenized:
      in: header
      type: apiKey
      name: Authorization
  schemas:
    user:
      properties:
        id:
          type: integer
          description: ID пользователя
        name:
          type: string
          description: Имя пользователя
        lastName:
          type: string
          description: Фамилия пользователя
        role:
          type: string
          description: Роль пользователя (оценщик, старший оценщик, мастер, руководитель отдела продаж)
          enum:
            - appraiser
            - appraiserLead
            - master
            - salesHead
    authRequest:
      properties:
        login:
          type: string
          description: Логин
        password:
          type: string
          description: Пароль
    authResult:
      properties:
        token:
          type: string
          description: Токен
        user:
          $ref: '#/components/schemas/user'
    callList:
      properties:
        id:
          type: string
          description: Идентификатор звонка
        status:
          type: string
          description: Статус звонка (Принят, Нет ответа, Занято)
          enum:
            - finished
            - noAnswer
            - busy
        time:
          type: string
          format: date-time
          description: Время звонка
        contact:
          $ref: '#/components/schemas/contact'
        need:
          $ref: '#/components/schemas/need'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    callCardIn:
      properties:
        status:
          type: string
          description: Статус звонка (Принят, Нет ответа, Занято)
          enum:
            - finished
            - noAnswer
            - busy
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        comment:
          type: string
          description: Комментарий
        callType:
          $ref: '#/components/schemas/callType'
        reason:
          $ref: '#/components/schemas/reason'
        result:
          $ref: '#/components/schemas/callResult'
        dealer:
          $ref: '#/components/schemas/dealer'
        operator:
          $ref: '#/components/schemas/operator'
        canal:
          $ref: '#/components/schemas/canal'
        contract:
          $ref: '#/components/schemas/contract'
        lastModified:
          type: string
          format: date-time
          description: Последнее изменение
        modifiedBy:
          type: string
          description: Изменил
        duration:
          type: integer
          description: Длительность
        record:
          type: string
          description: Ссылка на файл с записью звонка
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    callCardInUpdate:
      properties:
        contact:
          $ref: '#/components/schemas/contact'
        need:
          $ref: '#/components/schemas/need'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        comment:
          type: string
          description: Комментарий
        dealer:
          $ref: '#/components/schemas/dealer'
        operator:
          $ref: '#/components/schemas/operator'
        contract:
          $ref: '#/components/schemas/contract'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    callCardOutUpdate:
      properties:
        contact:
          $ref: '#/components/schemas/contact'
        need:
          $ref: '#/components/schemas/need'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        comment:
          type: string
          description: Комментарий
        reason:
          $ref: '#/components/schemas/reason'
        result:
          $ref: '#/components/schemas/callResult'
        dealer:
          $ref: '#/components/schemas/dealer'
        contract:
          $ref: '#/components/schemas/contract'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    callCardOut:
      allOf:
        - $ref: '#/components/schemas/callCardIn'
      properties:
        source:
          $ref: '#/components/schemas/source'
        seller:
          $ref: '#/components/schemas/seller'
        assignee:
          $ref: '#/components/schemas/callAssignee'
    newCall:
      description: Новый звонок
      properties:
        status:
          type: string
          description: Статус звонка (Принят, Нет ответа, Занято)
          enum:
            - finished
            - noAnswer
            - busy
        fromNumber:
          type: string
          description: Номер телефона звонящего
        time:
          type: string
          format: date-time
          description: Время звонка
        contact:
          $ref: '#/components/schemas/contact'
        need:
          $ref: '#/components/schemas/need'
        comment:
          type: string
          description: Комментарий
        reason:
          type: string
          description: Идентификатор из справочника "Причина звонка"
        result:
          type: string
          description: Идентификатор из справочника "Результат коммуникации"
        dealer:
          type: string
          description: Идентификатор из справочника "Автосалон"
        canal:
          type: string
          description: Идентификатор из справочника "Канал"
        contract:
          type: string
          description: Идентификатор из справочника "Контракт"
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    newCallExtended:
      allOf:
        - $ref: '#/components/schemas/newCall'
      properties:
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        operator:
          $ref: '#/components/schemas/operator'
        callType:
          $ref: '#/components/schemas/callType'
    issueList:
      description: Задача в списке
      properties:
        id:
          description: Идентификатор задачи
          type: string
        created:
          description: Дата создания задачи
          type: string
          format: date-time
        changed:
          description: Дата последнео изменения задачи
          type: string
          format: date-time
        comment:
          description: Последний комментарий
          type: string
        type:
          $ref: '#/components/schemas/issueType'
        status:
          description: Статус задачи (Новая, В работе, Завершено)
          type: string
          enum:
            - todo
            - progress
            - done
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    issueCard:
      description: Информация о задаче
      properties:
        status:
          description: Статус задачи (Новая, В работе, Завершено)
          type: string
          enum:
            - todo
            - progress
            - done
        expires:
          description: Дата выполнения
          type: string
          format: data-time
        type:
          $ref: '#/components/schemas/issueType'
        comment:
          description: Комментарий
          type: string
        contact:
          $ref: '#/components/schemas/contact'
        need:
          $ref: '#/components/schemas/need'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        dealer:
          $ref: '#/components/schemas/dealer'
        seller:
          $ref: '#/components/schemas/seller'
        assignee:
          $ref: '#/components/schemas/issueAssignee'
        canal:
          $ref: '#/components/schemas/canal'
        contract:
          $ref: '#/components/schemas/contract'
        createdAt:
          type: string
          format: date-time
          description: Дата создания
        createdBy:
          $ref: '#/components/schemas/issueAssignee'
        lastModified:
          type: string
          format: date-time
          description: Последниее изменения
        lastModifiedBy:
          $ref: '#/components/schemas/issueAssignee'
        car:
          $ref: '#/components/schemas/issueCar'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    clientList:
      description: Клиент в списке
      properties:
        status:
          type: string
          description: Статус клиента (Новый, Встреча, Отказ, Осмотр, Диагностика, Согласование, Сделка)
          enum:
            - new
            - meeting
            - decline
            - inspection
            - diagnostics
            - agreement
            - deal
        type:
          $ref: '#/components/parameters/clientType'
        need:
          $ref: '#/components/schemas/need'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        ppd:
          $ref: '#/components/schemas/ppd'
        comment:
          type: string
          description: Комментарий
        firstName:
          type: string
          description: Имя
        lastName:
          type: string
          description: Фамилия
        patronymic:
          type: string
          description: Отчество
        phone:
          type: string
          description: Телефон
        email:
          type: string
          description: Email
        id:
          type: string
          description: Идентификтор
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    clientCard:
      description: Карточка клиента
      allOf:
        - type: object
          properties:
            status:
              type: string
              description: Статус клиента (Новый, Встреча, Отказ, Осмотр, Диагностика, Согласование, Сделка)
              enum:
                - new
                - meeting
                - decline
                - inspection
                - diagnostics
                - agreement
                - deal
            need:
              $ref: '#/components/schemas/need'
            brand:
              $ref: '#/components/schemas/brand'
            model:
              $ref: '#/components/schemas/model'
            dealer:
              $ref: '#/components/schemas/dealer'
            canal:
              $ref: '#/components/schemas/canal'
            contract:
              $ref: '#/components/schemas/contract'
            createdAt:
              type: string
              format: date-time
              description: Дата создания
            createdBy:
              $ref: '#/components/schemas/clientCreator'
            modifiedAt:
              type: string
              format: date-time
              description: Дата последнего изменения
            modifiedBy:
              $ref: '#/components/schemas/clientCreator'
            checkResult:
              oneOf:
                - $ref: '#/components/schemas/checkNotPossible'
                - $ref: '#/components/schemas/checkResults'
            reseller:
              type: boolean
              description: Перекуп
            otm:
              type: boolean
              description: ОТМ
        - $ref: '#/components/schemas/counterparty'
    clientCar:
      description: Автомобиль клиента
      properties:
        id:
          type: string
          description: Идентификатор автомобиля
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        generation:
          $ref: '#/components/schemas/generation'
        engineVolume:
          type: number
          description: Объем двигателя, л.
        transmission:
          $ref: '#/components/schemas/transmissionType'
        color:
          $ref: '#/components/schemas/carColor'
        mileage:
          type: number
          description: Пробег
        vin:
          type: string
          description: VIN
        number:
          type: string
          description: Гос. номер
        clientPrice:
          type: number
          description: Цена клиента
        inspection:
          type: string
          description: Статус осмотра (Не проводился, В процессе, Завершен, Не состоялся)
          enum:
            - not
            - progress
            - done
            - notTakePlace
    clientValuation:
      description: Оценка клиента
      properties:
        id:
          type: string
          description: Идентификатор оценки
        need:
          $ref: '#/components/schemas/need'
        status:
          type: string
          description: Статус оценки (Черновик, Ожидает, В процессе, Завершена, Отказ клиента, Отказ оценщика, Отказ мастер)
          enum:
            - draft
            - waiting
            - progress
            - done
            - declineClient
            - declineAppraiser
            - declineMaster
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        generation:
          $ref: '#/components/schemas/generation'
        engineVolume:
          type: number
          description: Объем двигателя, л.
        transmission:
          $ref: '#/components/schemas/transmissionType'
        color:
          $ref: '#/components/schemas/carColor'
        mileage:
          type: number
          description: Пробег
        vin:
          type: string
          description: VIN
        buyOut:
          $ref: '#/components/schemas/buyOutState'
        inspection:
          $ref: '#/components/schemas/inspectionState'
        diagnostics:
          $ref: '#/components/schemas/diagnosticsState'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    valuationList:
      description: Оценка в списке
      properties:
        id:
          type: string
          description: Идентификатор оценки
        status:
          type: string
          description: Статус оценки (Черновик, Ожидает, В процессе, Завершена, Отказ клиента, Отказ оценщика, Отказ мастер)
          enum:
            - draft
            - waiting
            - progress
            - done
            - declineClient
            - declineAppraiser
            - declineMaster
        need:
          $ref: '#/components/schemas/need'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        year:
          type: string
          description: Год выпуска
        engineVolume:
          type: string
          description: Объем двигателя
        transmission:
          $ref: '#/components/schemas/transmissionType'
        color:
          $ref: '#/components/schemas/carColor'
        mileage:
          type: number
          description: Пробег
        vin:
          type: string
          description: VIN
        inspection:
          $ref: '#/components/schemas/inspectionState'
        buyOutState:
          $ref: '#/components/schemas/buyOutState'
        diagnostics:
          $ref: '#/components/schemas/diagnosticsState'
        reseller:
          type: boolean
          description: Перекуп
        otm:
          type: boolean
          description: ОТМ
    contact:
      description: Информация о клиенте
      oneOf:
        - type: object
          properties:
            phone:
              type: string
              description: Номер телефона
            name:
              type: string
              description: Кем представился
            email:
              type: string
              description: Email
            comment:
              description: Комментаций
              type: string
        - $ref: '#/components/schemas/counterparty'
    counterparty:
      description: Контрагент
      properties:
        id:
          type: string
          description: Идентификатор контрагента
        type:
          $ref: '#/components/schemas/counterpartyType'
        phone:
          type: string
          description: Телефон
        email:
          type: string
          description: Email
        lastName:
          type: string
          description: Фамилия
        firstName:
          type: string
          description: Имя
        patronymic:
          type: string
          description: Отчество
        birthday:
          type: string
          format: date-time
          description: Дата рождения
        placeBirth:
          type: string
          description: Место рождения
        gender:
          type: string
          enum:
            - m
            - f
        citizenship:
          $ref: '#/components/schemas/citizenship'
        documentType:
          $ref: '#/components/schemas/documentType'
        number:
          type: string
          description: Серия и номер документа
        issuedBy:
          type: string
          description: Выдан
        issuedCode:
          type: string
          description: Код подразделения
        issuedAt:
          type: string
          format: date-time
          description: Дата выдачи
        address:
          type: string
          description: Адрес
        ppd:
          $ref: '#/components/schemas/ppd'
        comment:
          description: Комментаций
          type: string
    issueCar:
      description: Автомобиль в задаче
      properties:
        id:
          type: string
          description: Идентификатор
        vin:
          type: string
          description: VIN
        number:
          type: string
          description: Гос. номер
        bodyNumber:
          type: string
          description: Номер кузова
        engineNumber:
          type: string
          description: Номер двигателя
        carType:
          $ref: '#/components/schemas/carType'
        brand:
          $ref: '#/components/schemas/brand'
        model:
          $ref: '#/components/schemas/model'
        generation:
          $ref: '#/components/schemas/generation'
        bodyType:
          $ref: '#/components/schemas/bodyType'
        wheelPosition:
          $ref: '#/components/schemas/wheelPosition'
        year:
          type: string
          description: Год выпуска
        engineVolume:
          type: number
          description: Объем двигателя, л.
        enginePower:
          type: number
          description: Мощность двигателя, л.с.
        transmissionType:
          $ref: '#/components/schemas/transmissionType'
        driveType:
          $ref: '#/components/schemas/driveType'
        mileage:
          type: number
          description: Пробег
        color:
          $ref: '#/components/schemas/carColor'
        metallic:
          type: boolean
          description: Признак цвета металлик
        interiorColor:
          $ref: '#/components/schemas/interiorColor'
        condition:
          $ref: '#/components/schemas/condition'
        seats:
          $ref: '#/components/schemas/seats'
        doors:
          $ref: '#/components/schemas/doors'
        armored:
          type: boolean
          description: Признак бронированного автомобиля
        class:
          $ref: '#/components/schemas/class'
        comment:
          type: string
          description: Комментарий
    checkResults:
      description: Результат проверки, если данных достаточно
      properties:
        code:
          type: integer
          description: Код результата проверки. Если все сервисы успешно пройдены - 1, если есть хотя бы одна проблема - 2
        lastCheck:
          type: string
          format: date-time
          description: Дата последней проверки
        id:
          type: string
          description: ID сущности, если она уже существует в системе
        services:
          type: array
          items:
            properties:
              name:
                type: string
                description: Название сервиса
              status:
                type: boolean
                description: Результат проверки. true - пройдена, зеленая
        report:
          type: string
          description: Идентификатор сохраненного отчета
    checkNotPossible:
      description: Результат проверки, если недостаточно данных
      properties:
        code:
          type: integer
          description: Код результата проверки. В случае недостаточности данных всегда = 3
        message:
          type: string
          description: Текстовое описание результата. Если прислано, то заменяет дефолтное сообщение из макета
    forceCheck:
      description: Повторная проверка, без учета таймаута между проверками
      properties:
        force:
          type: boolean
          description: Если true - запустить повторную проверку без учета кэша
    dictionary:
      description: Значение справочника
      properties:
        value:
          type: string
          description: Выводимое значение
        id:
          type: string
          description: Идентификатор
    dealer:
      description: Автосалон
      allOf:
        - $ref: '#/components/schemas/dictionary'
    dealerTree:
      description: Древовидный список автомалонов
      properties:
        groupName:
          type: string
          description: Название группы
        id:
          type: string
          description: Идентификатор группы
        values:
          type: array
          items:
            $ref: '#/components/schemas/dictionary'
    operator:
      description: Оператор
      allOf:
        - $ref: '#/components/schemas/dictionary'
    seller:
      description: Продавец
      allOf:
        - $ref: '#/components/schemas/dictionary'
    issueAssignee:
      description: Ответственный
      allOf:
        - $ref: '#/components/schemas/dictionary'
    canal:
      description: Канал
      allOf:
        - $ref: '#/components/schemas/dictionary'
    contract:
      description: Контракт
      allOf:
        - $ref: '#/components/schemas/dictionary'
    brand:
      description: Марка автомобиля
      allOf:
        - $ref: '#/components/schemas/dictionary'
    model:
      description: Модель автомобиля
      allOf:
        - $ref: '#/components/schemas/dictionary'
    source:
      description: Источник
      allOf:
        - $ref: '#/components/schemas/dictionary'
    reason:
      description: Причина звонка
      allOf:
        - $ref: '#/components/schemas/dictionary'
    callResult:
      description: Результат коммуникации
      allOf:
        - $ref: '#/components/schemas/dictionary'
    issueType:
      description: Типы задач
      allOf:
        - $ref: '#/components/schemas/dictionary'
    need:
      description: Потребность (Обмен на автомобиль с пробегом, Обмен на новый автомобиль, Выкуп)
      allOf:
        - $ref: '#/components/schemas/dictionary'
    callType:
      description: Тип звонка (Уникальный, Целевой, Уникально-целевой, Повторный, Обратный, Прямой, Спам)
      allOf:
        - $ref: '#/components/schemas/dictionary'
    callAssignee:
      description: Ответственный за звонок
      allOf:
        - $ref: '#/components/schemas/dictionary'
    counterpartyType:
      description: Типы клиентов
      allOf:
        - $ref: '#/components/schemas/dictionary'
    citizenship:
      description: Типы гражданств
      allOf:
        - $ref: '#/components/schemas/dictionary'
    documentType:
      description: Типы документов
      allOf:
        - $ref: '#/components/schemas/dictionary'
    carType:
      description: Тип ТС
      allOf:
        - $ref: '#/components/schemas/dictionary'
    generation:
      description: Поколение ТС
      allOf:
        - $ref: '#/components/schemas/dictionary'
    bodyType:
      description: Тип кузова
      allOf:
        - $ref: '#/components/schemas/dictionary'
    wheelPosition:
      description: Расположение руля
      allOf:
        - $ref: '#/components/schemas/dictionary'
    transmissionType:
      description: Коробка передач
      allOf:
        - $ref: '#/components/schemas/dictionary'
    driveType:
      description: Тип привода
      allOf:
        - $ref: '#/components/schemas/dictionary'
    engineType:
      description: Тип двигателя
      allOf:
        - $ref: '#/components/schemas/dictionary'
    carColor:
      description: Цвет кузова
      allOf:
        - $ref: '#/components/schemas/dictionary'
        - type: object
          properties:
            hex:
              type: string
              description: HEX цвета
    interiorColor:
      description: Цвет салона
      allOf:
        - $ref: '#/components/schemas/dictionary'
        - type: object
          properties:
            hex:
              type: string
              description: HEX цвета
    condition:
      description: Состояние
      allOf:
        - $ref: '#/components/schemas/dictionary'
    seats:
      description: Количество мест
      allOf:
        - $ref: '#/components/schemas/dictionary'
    doors:
      description: Количество дверей
      allOf:
        - $ref: '#/components/schemas/dictionary'
    class:
      description: Класс автомобиля
      allOf:
        - $ref: '#/components/schemas/dictionary'
    clientCreator:
      description: Создатель клиента
      allOf:
        - $ref: '#/components/schemas/dictionary'
    valuationCreator:
      description: Создатель оценки
      allOf:
        - $ref: '#/components/schemas/dictionary'
    valuationAssignee:
      description: Ответственный за оценку
      allOf:
        - $ref: '#/components/schemas/dictionary'
    valuationContractor:
      description: Согласовал оценку
      allOf:
        - $ref: '#/components/schemas/dictionary'
    clientType:
      description: тип клиента
      allOf:
        - $ref: '#/components/schemas/dictionary'
    paging:
      description: Постраничная навигация
      properties:
        current:
          type: integer
          description: Текущая страница
        pages:
          type: integer
          description: Количество страниц
    success:
      description: Успешное сохранение
      properties:
        status:
          type: boolean
          description: всегда true
        id:
          type: string
          description: Идентификатор новой записи
    failed:
      description: Ошибка при сохранении
      properties:
        status:
          type: boolean
          description: всегда false
        message:
          type: string
          description: Текст ошибки
    issueStatistic:
      description: Статистика задач
      properties:
        all:
          description: Всего по фильтру
          type: integer
        progress:
          description: В работе по фильтру
          type: integer
        done:
          description: Завершено по фильтру
          type: integer
    callStatistic:
      description: Статистика звонков
      properties:
        total:
          description: Общее количество звонков по фильтру
          type: integer
    ppd:
      description: Согласие на обработку персональных данных
      properties:
        status:
          type: string
          description: Статус согласия (Действительно, Недействительно, Не получено)
          enum:
            - active
            - inactive
            - not
        signedAt:
          type: string
          format: date-time
          description: Дата подписание
        expiredAt:
          type: string
          format: date-time
          description: Дата окончания действия
        scan:
          type: string
          format: binary
          description: Фотография/скан согласия на ОПД
    buyOutState:
      description: Инфо о выкупе
      properties:
        price:
          type: number
          description: Цена выкупа
        date:
          type: string
          format: date-time
          description: Дата выкупа
    inspectionState:
      description: Инфо об осмотре
      properties:
        status:
          type: string
          description: Статус осмотра
        date:
          type: string
          format: date-time
          description: Дата осмотра
    diagnosticsState:
      description: Инфо о диагностике
      properties:
        status:
          type: string
          description: Статус диагностики (Не проводилась, В процессе, Завершена, Не состоялась)
          enum:
            - not
            - progress
            - done
            - notTakePlace
        date:
          type: string
          format: date-time
          description: Дата диагностики
    arrivalState:
      description: Инфо о поступлении
      properties:
        status:
          type: string
          description: Статус поступления (Ожидает создания, Создано, Ожидает проведения, Проведено/На складе)
          enum:
            - waitingCreate
            - created
            - waitingStock
            - inStock
        date:
          type: string
          format: date-time
          description: Дата поступления
  parameters:
    fullText:
      in: query
      name: fullText
      description: Полнотекстовый поиск
      required: false
      schema:
        type: string
    datePreset:
      in: query
      name: datePreset
      description: Пресет периода (Все/all, Вчера/1ago, Сегодня/ [по умолчанию], Неделя/week, Месяц/month)
      required: false
      schema:
        type: string
    pageSize:
      in: query
      name: pageSize
      description: Размер страницы
      required: false
      schema:
        type: integer
    page:
      in: query
      name: page
      description: Номер страницы
      required: false
      schema:
        type: integer
    callSort:
      in: query
      name: sort
      description: Сортировка звонков (сначала новые, сначала старые, сначала продолжительные, сначала короткие)
      required: false
      schema:
        type: string
        enum:
          - created-desc
          - created-asc
          - duration-desc
          - duration-asc
    issueSort:
      in: query
      name: sort
      description: Сортировка задач (актуальные по дате выполнения, новые по дате создания, старые по дате создания, новые по статусу, в работе по статусу, завершенные по статусу)
      required: false
      schema:
        type: string
        enum:
          - done-asc
          - created-desc
          - created-asc
          - status-from-new
          - status-from-progress
          - status-from-done
    createdAt:
      in: query
      name: created
      description: Дата создания
      required: false
      schema:
        type: string
        format: date-time
    inspectedAt:
      in: query
      name: created
      description: Дата проведения осмотра
      required: false
      schema:
        type: string
        format: date-time
    diagnosticsAt:
      in: query
      name: created
      description: Дата проведения диагностики
      required: false
      schema:
        type: string
        format: date-time
    acceptedAt:
      in: query
      name: created
      description: Дата приема на склад
      required: false
      schema:
        type: string
        format: date-time
    doneAt:
      in: query
      name: done
      description: Дата выполнения
      required: false
      schema:
        type: string
        format: date-time
    issueType:
      in: query
      name: type
      description: Тип задачи (идентификатор из справочника типов задач)
      required: false
      schema:
        type: string
    issueStatus:
      in: query
      name: status
      description: Фильтра по статусам задач (Всe, В работе, Завершено)
      required: false
      schema:
        type: string
    canal:
      in: query
      name: canal
      description: Фильтр по каналу (идентификатор из справочника каналов)
      required: false
      schema:
        type: string
    contract:
      in: query
      name: contract
      description: Фильтр по контракту (идентификатор из справочника контрактов)
      required: false
      schema:
        type: string
    dealer:
      in: query
      name: dealer
      description: Фильтр по автосалону (идентификатор из справочника автосалонов)
      required: false
      schema:
        type: string
    issueAssignee:
      in: query
      name: assignee
      description: Фильтр по ответственному (идентификатор из справочника пользователей, null если отмечен "Нет ответственного")
      required: false
      schema:
        type: string
    seller:
      in: query
      name: seller
      description: Фильтр по продавцу (идентификатор из справочника продавцов)
      required: false
      schema:
        type: string
    phone:
      in: query
      name: phone
      description: Номер телефона контакта/котрагента
      required: false
      schema:
        type: string
    vin:
      in: query
      name: vin
      description: VIN автомобиля
      required: false
      schema:
        type: string
    callDate:
      in: query
      name: date
      description: Дата звонка
      required: false
      schema:
        type: string
        pattern: DD.MM.YYYY
    callDirection:
      in: query
      name: direction
      description: Направление звонка (входящий, исходящий)
      required: false
      schema:
        type: string
        enum:
          - in
          - out
    callStatus:
      in: query
      name: status
      description: Статус звонка
      required: false
      schema:
        type: string
    source:
      in: query
      name: source
      description: Источник
      required: false
      schema:
        type: string
    callType:
      in: query
      name: type
      description: Тип звонка
      required: false
      schema:
        type: string
    callReason:
      in: query
      name: reason
      description: Причина звонка
      required: false
      schema:
        type: string
    callResult:
      in: query
      name: result
      description: Результат коммуникации
      required: false
      schema:
        type: string
    callOperator:
      in: query
      name: operator
      description: Оператор
      required: false
      schema:
        type: string
    callAssignee:
      in: query
      name: assignee
      description: Ответственный (null если отмечен "Нет ответственного")
      required: false
      schema:
        type: string
    callID:
      in: path
      name: callID
      description: Идентификатор звонка
      required: true
      schema:
        type: string
    issueID:
      in: path
      name: issueID
      description: Идентификатор задачи
      required: true
      schema:
        type: string
    reportID:
      in: path
      name: reportID
      description: Идентификатор отчета
      required: true
      schema:
        type: string
    clientSort:
      in: query
      name: sort
      description: Сортировка клиентов (новые по дате изменения, старые по дате изменения, новые по дате создания, старые по дате создания, по статусу "новый", по статусу "отказ")
      required: false
      schema:
        type: string
        enum:
          - modified-desc
          - modified-asc
          - created-desc
          - created-asc
          - status-from-new
          - status-from-decline
    clientStatus:
      in: query
      name: status
      description: Фильтр по статусам клиентов
      required: false
      schema:
        type: string
    valuationClientStatus:
      in: query
      name: clientStatus
      description: Фильтр по статусам клиентов
      required: false
      schema:
        type: string
    valuationSort:
      in: query
      name: sort
      description: Сортировка оценок (новые по дате изменения, старые по дате изменения, новые по дате создания, старые по дате создания, сначала черновики, сначала отказы)
      required: false
      schema:
        type: string
        enum:
          - modified-desc
          - modified-asc
          - created-desc
          - created-asc
          - status-from-draft
          - status-from-decline
    valuationStatus:
      in: query
      name: status
      description: Фильтр по статусам оценок
      required: false
      schema:
        type: string
    inspectionStatus:
      in: query
      name: inspectionStatus
      description: Фильтр по статусам осмотра
      required: false
      schema:
        type: string
    diagnosticsStatus:
      in: query
      name: diagnosticsStatus
      description: Фильтр по статусам диагностики
      required: false
      schema:
        type: string
    agreementStatus:
      in: query
      name: agreementStatus
      description: Фильтр по статусам согласования цены
      required: false
      schema:
        type: string
    purchasePrice:
      in: query
      name: purchasePrice
      description: Фильтр по стоимости выкупа
      required: false
      schema:
        type: number
    purchasePriceDiff:
      in: query
      name: purchasePriceDiff
      description: Фильтр по разнице в предложении
      required: false
      schema:
        type: number
    arrivalStatus:
      in: query
      name: arrivalStatus
      description: Фильтр по статусу поступления
      required: false
      schema:
        type: number
    warehouseID:
      in: query
      name: warehouseID
      description: Фильтр по идентификатору на складе
      required: false
      schema:
        type: string
    valuationAssignee:
      in: query
      name: assignee
      description: Ответственный (null если отмечен "Нет ответственного")
      required: false
      schema:
        type: string
    valuationContractor:
      in: query
      name: assignee
      description: Ответственный (null если отмечен "Нет ответственного")
      required: false
      schema:
        type: string
    carNumber:
      in: query
      name: carNumber
      description: Гос. номер автомобиля
      required: false
      schema:
        type: string
    bodyNumber:
      in: query
      name: bodyNumber
      description: Номер кузова
      required: false
      schema:
        type: string
    engineNumber:
      in: query
      name: engineNumber
      description: Номер двигателя
      required: false
      schema:
        type: string
    carType:
      in: query
      name: carType
      description: Тип ТС
      required: false
      schema:
        type: string
    brand:
      in: query
      name: brand
      description: Идентификатор марки
      required: false
      schema:
        type: string
    model:
      in: query
      name: model
      description: Идентификатор модели
      required: false
      schema:
        type: string
    generation:
      in: query
      name: generation
      description: Идентификатор поколения
      required: false
      schema:
        type: string
    bodyType:
      in: query
      name: bodyType
      description: Тип кузова
      required: false
      schema:
        type: string
    wheelPosition:
      in: query
      name: wheelPosition
      description: Расположение руля
      required: false
      schema:
        type: string
    year:
      in: query
      name: year
      description: Год выпуска
      required: false
      schema:
        type: string
    engineType:
      in: query
      name: engineType
      description: Тип двигателя
      required: false
      schema:
        type: string
    engineVolume:
      in: query
      name: engineVolume
      description: Объем двигателя
      required: false
      schema:
        type: string
    enginePower:
      in: query
      name: enginePower
      description: Мощность двигателя
      required: false
      schema:
        type: string
    transmissionType:
      in: query
      name: transmissionType
      description: Тип коробки передач
      required: false
      schema:
        type: string
    driveType:
      in: query
      name: driveType
      description: Тип привода
      required: false
      schema:
        type: string
    mileage:
      in: query
      name: mileage
      description: Пробег
      required: false
      schema:
        type: string
    carColor:
      in: query
      name: carColor
      description: Цвет кузова
      required: false
      schema:
        type: string
    metallic:
      in: query
      name: metallic
      description: Признак металлик
      required: false
      schema:
        type: boolean
    interiorColor:
      in: query
      name: interiorColor
      description: Цвет салона
      required: false
      schema:
        type: string
    condition:
      in: query
      name: condition
      description: Состояние
      required: false
      schema:
        type: string
    seats:
      in: query
      name: seats
      description: Количество мест
      required: false
      schema:
        type: number
    doors:
      in: query
      name: doors
      description: Количество дверей
      required: false
      schema:
        type: number
    armored:
      in: query
      name: armored
      description: Бронированный автомобиль
      required: false
      schema:
        type: boolean
    class:
      in: query
      name: class
      description: Класс ТС
      required: false
      schema:
        type: string
    ppd:
      in: query
      name: ppd
      description: Согласие на обработку персональных данных
      required: false
      schema:
        type: string
    clientType:
      in: query
      name: type
      description: Тип клиента (идентификатор из справочника типов клиентов)
      required: false
      schema:
        type: string
    valuationClientType:
      in: query
      name: clientType
      description: Тип клиента (идентификатор из справочника типов клиентов)
      required: false
      schema:
        type: string
    need:
      in: query
      name: need
      description: Потребность клиента
      required: false
      schema:
        type: string
    name:
      in: query
      name: name
      description: ФИО клиента
      required: false
      schema:
        type: string
    email:
      in: query
      name: email
      description: Email клиента
      required: false
      schema:
        type: string
    createdBy:
      in: query
      name: createdBy
      description: Создал сущность
      required: false
      schema:
        type: string
    clientID:
      in: path
      name: clientID
      description: Идентификатор клиента
      required: true
      schema:
        type: string
    filterClientID:
      in: query
      name: clientID
      description: Идентификатор клиента
      required: true
      schema:
        type: string